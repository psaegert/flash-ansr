defaults:
  data_source: &e2e_val_source
    type: skeleton_dataset
    dataset: "{{ROOT}}/configs/v23.0-120M/dataset_val.yaml"
    datasets_per_expression: 10
    n_support: 1024
    noise_level: 0.0
    max_trials: 100
    target_size: 1000  # 100 skeletons Ã— 10 repeats
  model_adapter: &e2e_adapter
    type: e2e
    model_path: "{{ROOT}}/models/e2e/model1.pt"
    simplipy_engine: "dev_7-3"
    device: cuda
    candidates_per_bag: 256
    max_input_points: 200
    max_number_bags: 100
    n_trees_to_refine: 10
    rescale: true
  runner: &e2e_val_runner
    limit: null
    save_every: 64
    resume: true

experiments:
  e2e_val_support_00001:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 1
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00001.pkl"

  e2e_val_support_00002:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 2
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00002.pkl"

  e2e_val_support_00004:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 4
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00004.pkl"

  e2e_val_support_00008:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 8
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00008.pkl"

  e2e_val_support_00016:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 16
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00016.pkl"

  e2e_val_support_00032:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 32
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00032.pkl"

  e2e_val_support_00064:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 64
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00064.pkl"

  e2e_val_support_00128:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 128
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00128.pkl"

  e2e_val_support_00256:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 256
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00256.pkl"

  e2e_val_support_00512:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 512
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_00512.pkl"

  e2e_val_support_01024:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 1024
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_01024.pkl"

  e2e_val_support_02048:
    run:
      data_source:
        <<: *e2e_val_source
        n_support: 2048
      model_adapter: *e2e_adapter
      runner:
        <<: *e2e_val_runner
        output: "{{ROOT}}/results/evaluation/support_sweep/e2e/val/support_02048.pkl"
