defaults:
  data_source: &nesymres_val_source
    type: skeleton_dataset
    dataset: "{{ROOT}}/configs/v23.0-120M/dataset_val.yaml"
    datasets_per_expression: 10
    n_support: 512
    noise_level: 0.0
    max_trials: 100
    target_size: 1000  # 100 skeletons Ã— 10 repeats
  model_adapter: &nesymres_adapter
    type: nesymres
    eq_setting_path: "{{ROOT}}/models/nesymres/eq_setting.json"
    config_path: "{{ROOT}}/models/nesymres/config.yaml"
    weights_path: "{{ROOT}}/models/nesymres/100M.ckpt"
    simplipy_engine: "dev_7-3"
    n_restarts: 4
    device: cuda
    remove_padding: true
    beam_width: 4
  runner: &nesymres_val_runner
    limit: null
    save_every: 32
    resume: true

experiments:
  nesymres_val_noise_0p000:
    run:
      data_source: *nesymres_val_source
      model_adapter: *nesymres_adapter
      runner:
        <<: *nesymres_val_runner
        output: "{{ROOT}}/results/evaluation/noise_sweep/nesymres/val/noise_0p000.pkl"

  nesymres_val_noise_0p001:
    run:
      data_source:
        <<: *nesymres_val_source
        noise_level: 0.001
      model_adapter: *nesymres_adapter
      runner:
        <<: *nesymres_val_runner
        output: "{{ROOT}}/results/evaluation/noise_sweep/nesymres/val/noise_0p001.pkl"

  nesymres_val_noise_0p010:
    run:
      data_source:
        <<: *nesymres_val_source
        noise_level: 0.01
      model_adapter: *nesymres_adapter
      runner:
        <<: *nesymres_val_runner
        output: "{{ROOT}}/results/evaluation/noise_sweep/nesymres/val/noise_0p010.pkl"

  nesymres_val_noise_0p100:
    run:
      data_source:
        <<: *nesymres_val_source
        noise_level: 0.1
      model_adapter: *nesymres_adapter
      runner:
        <<: *nesymres_val_runner
        output: "{{ROOT}}/results/evaluation/noise_sweep/nesymres/val/noise_0p100.pkl"
