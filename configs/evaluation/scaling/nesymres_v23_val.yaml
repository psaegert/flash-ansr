defaults:
  data_source: &nesymres_v23_source
    type: skeleton_dataset
    dataset: "{{ROOT}}/configs/v23.0-60M/dataset_val.yaml"
    n_support: 512
    noise_level: 0.0
    preprocess: false
    device: cuda
    datasets_per_expression: 4
  model_adapter: &nesymres_adapter
    type: nesymres
    eq_setting_path: "{{ROOT}}/external/nesymres/eq_setting.json"
    config_path: "{{ROOT}}/external/nesymres/config.yaml"
    weights_path: "{{ROOT}}/external/nesymres/model.ckpt"
    simplipy_engine: "dev_7-3"
    n_restarts: 4
    device: cuda
  runner: &nesymres_v23_runner
    limit: null
    save_every: 32
    resume: true

experiments:
  nesymres_v23_beam_00001:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 1
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00001.pkl"

  nesymres_v23_beam_00002:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 2
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00002.pkl"

  nesymres_v23_beam_00004:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 4
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00004.pkl"

  nesymres_v23_beam_00008:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 8
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00008.pkl"

  nesymres_v23_beam_00016:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 16
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00016.pkl"

  nesymres_v23_beam_00032:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 32
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00032.pkl"

  nesymres_v23_beam_00064:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 64
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00064.pkl"

  nesymres_v23_beam_00128:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 128
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00128.pkl"

  nesymres_v23_beam_00256:
    run:
      data_source: *nesymres_v23_source
      model_adapter:
        <<: *nesymres_adapter
        beam_width: 256
      runner:
        <<: *nesymres_v23_runner
        output: "{{ROOT}}/results/evaluation/scaling/nesymres/v23_val/beam_00256.pkl"
